<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Micro Equity Matching Form</title>

  <!-- Base/shared layout styles -->
  <link rel="stylesheet" href="/web/styles/Loan_vs_Investments.css" />
  <!-- Date/select look you prefer -->
  <link rel="stylesheet" href="/web/styles/Equity_Conversion.css" />
  <link rel="stylesheet" href="/web/styles/form-navbar.css" />
</head>
<body>
  <!-- FORM NAVBAR (identical style to dashboard) -->
    <nav class="esk-nav" role="navigation" aria-label="Primary">
      <div class="esk-nav__inner">
        <!-- Brand -->
        <a class="esk-nav__brand" id="esk-form-brand" href="#">
          <img src="/Assets/Eskala-Logo.png" alt="" />
          <span>Eskala</span>
        </a>

        <div class="esk-nav__spacer"></div>

        <!-- Language Dropdown -->
        <div class="esk-nav__group">
          <button
            class="esk-nav__btn"
            type="button"
            data-menu="lang"
            aria-haspopup="true"
            aria-expanded="false"
            aria-controls="menu-lang"
          >
            English â–¾
          </button>
          <div class="esk-nav__menu" id="menu-lang" role="menu" hidden>
            <a href="#" role="menuitem" data-lang="en">English</a>
            <a href="#" role="menuitem" data-lang="es">EspaÃ±ol</a>
          </div>
        </div>

        <!-- Back/Home -->
        <a href="#" id="esk-form-home" class="esk-nav__btn esk-nav__btn--ghost"
          >â† Home</a
        >
      </div>
    </nav>

    <!-- Thin completion progress bar -->
    <div class="esk-form-progress">
      <div class="esk-form-progress__bar" id="esk-form-progress-bar"></div>
    </div>
  <!-- END FORM NAVBAR -->
  <div class="eskala-equity-frame">
    <main class="main-content">
      <!-- Header / Logo -->
      <header class="form-header">
        <img class="eskala-header" src="/Assets/Eskala-Logo.png" alt="Eskala logo" />
        <!-- <button class="language-toggle" type="button" onclick="toggleLanguage()">EspaÃ±ol</button> -->
      </header>

      <!-- Title -->
      <h1 class="form-title"
          data-en="Micro Equity Matching Form"
          data-es="Formulario de Emparejamiento de Microequidad">
        Micro Equity Matching Form
      </h1>

      <!-- Intro (optional) -->
      <!-- <section>
        <p class="no-data" style="color:#6b7280; font-style: normal; padding:0; margin:0;"
           data-en="Please fill out all fields with accurate information for matching equity evaluation."
           data-es="Por favor complete todos los campos con informaciÃ³n precisa para la evaluaciÃ³n de equidad de emparejamiento.">
          Please fill out all fields with accurate information for matching equity evaluation.
        </p>
      </section> -->

      <form id="matching-form" class="form-container" method="post" action="#" novalidate>
        <!-- Partner Details -->
        <section>
          <h2 class="section-title" data-en="Partner Details" data-es="InformaciÃ³n del socio">Partner Details</h2>


          <div class="input-group">
            <label for="partner-name" data-en="ğŸ‘¤ Partner Name" data-es="ğŸ‘¤ Nombre del Socio">ğŸ‘¤ Partner Name</label>
            <input type="text" id="partner-name" required autocomplete="organization"
                   placeholder="e.g., MarÃ­a Fernanda LÃ³pez"
                   data-en-placeholder="e.g., MarÃ­a Fernanda LÃ³pez"
                   data-es-placeholder="p. ej., MarÃ­a Fernanda LÃ³pez" />
          </div>

          <div class="input-group">
            <label for="year" data-en="ğŸ“† Year" data-es="ğŸ“† AÃ±o">ğŸ“† Year</label>
            <input id="year" name="year" type="number" required
                   placeholder="e.g., 2025"
                   data-en-placeholder="e.g., 2025"
                   data-es-placeholder="p. ej., 2025" />
          </div>

          <div class="input-group">
            <label for="technician" data-en="ğŸ§‘â€ğŸ”§ Technician Name" data-es="ğŸ§‘â€ğŸ”§ Nombre del TÃ©cnico">ğŸ§‘â€ğŸ”§ Technician Name</label>
            <input type = "text" id="technician" name="technician"
                   placeholder="e.g., MIGUEL RODRIGUEZ"
                   data-en-placeholder="e.g., Miguel Rodriguez "
                   data-es-placeholder="p. ej., Miguel Rodriguez" />
          </div>
          

        </section>

        <!-- Share & Capital Details -->
        <section>
          <h2 class="section-title" data-en="Share & Capital Details" data-es="Detalles de Acciones y Capital">Share & Capital Details</h2>

          <div class="input-group">
            <label for="reported-shares" data-en="ğŸ“Š Reported Shares" data-es="ğŸ“Š Acciones Reportadas">ğŸ“Š Reported Shares</label>
            <input id="reported-shares" name="reportedShares" type="number" step="0.01"
                   placeholder="e.g., 1000"
                   data-en-placeholder="e.g., 1000"
                   data-es-placeholder="p. ej., 1000" />
          </div>

          <div class="input-group">
            <label for="share-capital" data-en="ğŸ“ˆ Share Capital" data-es="ğŸ“ˆ Capital Social">ğŸ“ˆ Share Capital</label>
            <input id="share-capital" name="shareCapitalMultiplied" type="number" step="0.01"
                   placeholder="e.g., 2500"
                   data-en-placeholder="e.g., 2500"
                   data-es-placeholder="p. ej., 2500" />
          </div>

          <div class="input-group">
            <label for="expected-pct" data-en="ğŸ“‰ Expected Profit %" data-es="ğŸ“‰ % de Ganancia Esperado">ğŸ“‰ Expected Profit %</label>
            <div class="inline">
              <input id="expected-pct" name="expectedProfitPct" type="number" step="0.01"
                     placeholder="e.g., 10 for 10%"
                     data-en-placeholder="e.g., 10"
                     data-es-placeholder="p. ej., 10" />
              <span class="addon">%</span>
            </div>
          </div>
        </section>

        <!-- Investment Details -->
        <section>
          <h2 class="section-title" data-en="Investment Details" data-es="Detalles de InversiÃ³n">Investment Details</h2>

          <div class="input-group">
            <label for="inv-l" data-en="ğŸ’¸ Investment Amount (L.)" data-es="ğŸ’¸ Monto de InversiÃ³n (L.) â€“ EQUIDAD FIJA + KIT TECH">ğŸ’¸ Investment Amount (L.) â€“ FIXED EQUITY + TECH KIT</label>
             Fixed Equity + Tech Kit
            <div class="inline">
              <input id="inv-l" name="investmentAmountL" type="number" step="0.01"
                     placeholder="e.g., 110000.00"
                     data-en-placeholder="e.g., 110000.00"
                     data-es-placeholder="p. ej., 110000.00" />
              <span class="addon">L.</span>
            </div>
          </div>

          <div class="input-group">
            <label for="inv-usd" data-en="ğŸ’¸ Investment Amount (USD) â€“ Auto-Calculated" data-es="ğŸ’¸ Monto de InversiÃ³n (USD) â€“ Auto-Calculado">ğŸ’¸ Investment Amount (USD) â€“ Auto-Calculated</label>
            <div class="inline">
              <input id="inv-usd" name="investmentAmountUSD" readonly
                     style="background:#f3f4f6; cursor:not-allowed; font-weight:600; color:#059669;"
                     placeholder="Calculated by formula"
                     data-en-placeholder="Calculated by formula"
                     data-es-placeholder="Calculado por fÃ³rmula" />
              <span class="addon">$</span>
            </div>
            <small style="color:#6b7280; font-size:12px; display:block; margin-top:4px;">
              <span data-en="Formula managed in Formula Manager" data-es="FÃ³rmula gestionada en Gestor de FÃ³rmulas">Formula managed in Formula Manager</span>
            </small>
          </div>

          <div class="input-group" style="max-width: 360px;">
            <label for="fx" data-en="ğŸ’± Exchange Rate (L per USD) â€“ Auto-Loaded" data-es="ğŸ’± Tipo de Cambio (L por USD) â€“ Auto-Cargado">ğŸ’± Exchange Rate (L per USD) â€“ Auto-Loaded</label>
            <div class="inline">
              <input id="fx" name="exchangeRate" readonly
                     style="background:#f3f4f6; cursor:not-allowed; font-weight:600; color:#059669;"
                     placeholder="Loaded from Exchange Rate Manager"
                     data-en-placeholder="Loaded from Exchange Rate Manager"
                     data-es-placeholder="Cargado desde Gestor de Tipo de Cambio" />
              <span class="addon">L / $</span>
            </div>
            <small style="color:#6b7280; font-size:12px; display:block; margin-top:4px;">
              <span data-en="Rate managed in Exchange Rate Manager" data-es="Tasa gestionada en Gestor de Tipo de Cambio">Rate managed in Exchange Rate Manager</span>
            </small>
          </div>
        </section>

        <!-- Proposal & Transaction -->
        <section>
          <h2 class="section-title" data-en="Proposal & Transaction" data-es="Propuesta y TransacciÃ³n">Proposal & Transaction</h2>

          <div class="input-group">
            <label for="proposal" data-en="ğŸ“„ Proposal State" data-es="ğŸ“„ Estado de la Propuesta">ğŸ“„ Proposal State</label>
            <select id="proposal" name="proposalState">
              <option value="" data-en="Select state" data-es="Seleccione estado">Select state</option>
              <option value="Executed"  data-en="Executed"   data-es="Ejecutado">Executed</option>
              <option value="Rejected"  data-en="Rejected"   data-es="Rechazado">Rejected</option>
              <option value="Presented" data-en="Presented"  data-es="Presentado">Presented</option>
              <option value="To Pitch"  data-en="To Pitch"   data-es="Para Presentar">To Pitch</option>
            </select>
          </div>

          <div class="input-group">
            <label for="transaction" data-en="ğŸ“„ Transaction Type" data-es="ğŸ“„ Tipo de TransacciÃ³n">ğŸ“„ Transaction Type</label>
            <select id="transaction" name="transactionType">
              <option value="" data-en="Select type" data-es="Seleccione tipo">Select type</option>
              <option value="Conversion"   data-en="Conversion"   data-es="ConversiÃ³n">Conversion</option>
              <option value="Disbursement" data-en="Disbursement" data-es="Desembolso">Disbursement</option>
            </select>
          </div>
        </section>

        <!-- Monthly Distributions (Lempiras) -->
        <section>
          <h2 class="section-title" data-en="Monthly Distributions (Lempiras)" data-es="Distribuciones Mensuales (Lempiras)">Monthly Distributions (Lempiras)</h2>

          <p class="no-data" style="color:#6b7280; font-style: normal; padding:0; margin:0 0 12px 0;"
             data-en="Enter profit distributions for each month. Leave as 0 if no distribution."
             data-es="Ingrese las distribuciones de ganancias para cada mes. Dejar en 0 si no hay distribuciÃ³n.">
            Enter profit distributions for each month. Leave as 0 if no distribution.
          </p>

          <!-- 12 months in 4 rows x 3 -->
          <div class="input-group">
            <label for="january" data-en="January" data-es="Enero">January</label>
            <div class="inline">
              <input id="january" name="januaryL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
          <div class="input-group">
            <label for="february" data-en="February" data-es="Febrero">February</label>
            <div class="inline">
              <input id="february" name="februaryL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
          <div class="input-group">
            <label for="march" data-en="March" data-es="Marzo">March</label>
            <div class="inline">
              <input id="march" name="marchL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>

          <div class="input-group">
            <label for="april" data-en="April" data-es="Abril">April</label>
            <div class="inline">
              <input id="april" name="aprilL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
          <div class="input-group">
            <label for="may" data-en="May" data-es="Mayo">5ï¸May</label>
            <div class="inline">
              <input id="may" name="mayL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
          <div class="input-group">
            <label for="june" data-en="June" data-es="Junio">June</label>
            <div class="inline">
              <input id="june" name="juneL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>

          <div class="input-group">
            <label for="july" data-en="July" data-es="Julio">v July</label>
            <div class="inline">
              <input id="july" name="julyL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
          <div class="input-group">
            <label for="august" data-en="August" data-es="Agosto">August</label>
            <div class="inline">
              <input id="august" name="augustL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
          <div class="input-group">
            <label for="september" data-en="September" data-es="Septiembre">September</label>
            <div class="inline">
              <input id="september" name="septemberL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>

          <div class="input-group">
            <label for="october" data-en="October" data-es="Octubre">October</label>
            <div class="inline">
              <input id="october" name="octoberL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
          <div class="input-group">
            <label for="november" data-en="November" data-es="Noviembre">November</label>
            <div class="inline">
              <input id="november" name="novemberL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
          <div class="input-group">
            <label for="december" data-en="December" data-es="Diciembre">December</label>
            <div class="inline">
              <input id="december" name="decemberL" type="number" step="0.01" value="0" placeholder="0.00" />
              <span class="addon">L.</span>
            </div>
          </div>
        </section>

        <!-- Location & Company -->
        <section>
          <h2 class="section-title" data-en="Location & Company" data-es="UbicaciÃ³n y Empresa">Location & Company</h2>

          <div class="input-group">
            <label for="bizcat" data-en="ğŸ­ Influence Zone Business Category" data-es="ğŸ­ CategorÃ­a de la Zona de Influencia">ğŸ­ Influence Zone Business Category</label>
            <input type="text" id="bizcat" name="businessCategory"
                   placeholder="e.g., Coffee / Commerce / Staple Grains"
                   data-en-placeholder="e.g., Coffee / Commerce / Staple Grains"
                   data-es-placeholder="p. ej., CafÃ© / Comercio / Granos BÃ¡sicos" />
          </div>

          <div class="input-group">
            <label for="company-type" data-en="ğŸ¢ Company Type" data-es="ğŸ¢ Tipo de Empresa">ğŸ¢ Company Type</label>
            <input type="text" id="company-type" name="companyType"
                   placeholder="e.g., Cooperative"
                   data-en-placeholder="e.g., Cooperative"
                   data-es-placeholder="p. ej., Cooperativa" />
          </div>

          <div class="input-group">
            <label for="community" data-en="ğŸ˜ï¸ Community" data-es="ğŸ˜ï¸ Comunidad">ğŸ˜ï¸ Community</label>
            <input type="text" id="community" name="community"
                   placeholder="e.g., El ParaÃ­so"
                   data-en-placeholder="e.g., El ParaÃ­so"
                   data-es-placeholder="p. ej., El ParaÃ­so" />
          </div>

          <div class="input-group">
            <label for="municipality" data-en="ğŸ›ï¸ Municipality" data-es="ğŸ›ï¸ Municipio">ğŸ›ï¸ Municipality</label>
            <input type="text" id="municipality" name="municipality"
                   placeholder="e.g., DanlÃ­"
                   data-en-placeholder="e.g., DanlÃ­"
                   data-es-placeholder="p. ej., DanlÃ­" />
          </div>

          <div class="input-group">
            <label for="state" data-en="ğŸ—ºï¸ State" data-es="ğŸ—ºï¸ Departamento">ğŸ—ºï¸ State</label>
            <input type="text" id="state" name="state"
                   placeholder="e.g., El ParaÃ­so"
                   data-en-placeholder="e.g., El ParaÃ­so"
                   data-es-placeholder="p. ej., El ParaÃ­so" />
          </div>

        <!-- Attachments & Declaration -->
        <section>
          <h2 class="section-title"
              data-en="Attachments and Declaration"
              data-es="Adjuntos y DeclaraciÃ³n">
            Attachments and Declaration
          </h2>

          <div class="input-group">
            <label for="supporting-file"
                   data-en="ğŸ“ Upload file (optional)"
                   data-es="ğŸ“ Subir archivo (opcional)">
              ğŸ“ Upload file (optional)
            </label>
            <input id="supporting-file" name="supporting_file" type="file" accept="application/pdf" />
          </div>

          <div class="input-group">
            <label for="comments" data-en="ğŸ“ Comments" data-es="ğŸ“ Comentarios">ğŸ“ Comments</label>
            <textarea id="comments" name="comments" rows="4"
                      placeholder="Any additonal comments "
                      data-en-placeholder="Any additonal comments "
                      data-es-placeholder="Â¿AlgÃºn comentario adicional?"></textarea>
          </div>

          <label class="confirm-row" for="confirm-accurate">
            <input type="checkbox" id="confirm-accurate" name="confirm_accurate" required />
            <span data-en="I confirm the submitted details are accurate"
                  data-es="Confirmo que los datos enviados son correctos">
              I confirm the submitted details are accurate
            </span>
          </label>

          <hr class="submit-divider" />
          <button type="submit" class="submit-button"
                  data-en="SUBMIT"
                  data-es="ENVIAR">
            SUBMIT
          </button>

        <!-- Link to view all entries -->
        <div style="text-align:center; margin-top: 16px;">
          <a href="/web/matching-equity-table.html"
             style="color:#10B981; font-weight:600; text-decoration:none; font-size:16px;"
             data-en="View All Entries â†’" data-es="Ver Todas las Entradas â†’">View All Entries â†’</a>
        </div>

        <!-- <section style="background:transparent;">
          <p class="no-data" style="color:#9ca3af; font-style: normal; padding:0; margin:16px 0 0 0;"
             data-en="All information is confidential and used solely for equity management purposes."
             data-es="Toda la informaciÃ³n es confidencial y se utiliza Ãºnicamente para fines de gestiÃ³n de equidad.">
            All information is confidential and used solely for equity management purposes.
          </p>
        </section> -->
      </form>
    </main>
  </div>

  <!-- Language toggle -->
  <script>
    // (function ensureEnglishOnLoad() {
    //   document.querySelectorAll('[data-en]').forEach(el => {
    //     const en = el.getAttribute('data-en'); if (en) el.textContent = en;
    //   });
    //   document.querySelectorAll('[data-en-placeholder]').forEach(el => {
    //     const ph = el.getAttribute('data-en-placeholder'); if (ph) el.placeholder = ph;
    //   });
    //   document.querySelectorAll('option[data-en]').forEach(opt => {
    //     const txt = opt.getAttribute('data-en'); if (txt) opt.textContent = txt;
    //   });
    // })();

    // let currentLang = 'en';
    // function toggleLanguage() {
    //   currentLang = currentLang === 'en' ? 'es' : 'en';
    //   document.querySelectorAll('[data-en]').forEach(el => {
    //     const val = el.getAttribute(`data-${currentLang}`); if (val) el.textContent = val;
    //   });
    //   document.querySelectorAll('[data-en-placeholder]').forEach(el => {
    //     const ph = el.getAttribute(`data-${currentLang}-placeholder`); if (ph) el.placeholder = ph;
    //   });
    //   document.querySelectorAll('option[data-en]').forEach(opt => {
    //     const txt = opt.getAttribute(`data-${currentLang}`); if (txt) opt.textContent = txt;
    //   });
    //   const btn = document.querySelector('.language-toggle');
    //   if (btn) btn.textContent = currentLang === 'en' ? 'EspaÃ±ol' : 'English';
    // }
          // Show admin link if URL contains ?staff=true
      const urlParams = new URLSearchParams(window.location.search);
        const c = document.getElementById("admin-link-container");
        if (c) c.style.display = "block";
      
  </script>

    <!-- Language handler: must come before /form-navbar.js -->
    <script>
      (function () {
        const LANG_KEY = "eskala_lang";

        // Global hook used by form-navbar.js
        window.setLanguage = function setLanguage(lang) {
          lang = lang === "es" ? "es" : "en";

          // Update all visible text
          document.querySelectorAll("[data-en]").forEach((el) => {
            const text = el.getAttribute("data-" + lang);
            if (text != null) el.textContent = text;
          });

          // Update placeholders
          document.querySelectorAll("[data-en-placeholder]").forEach((el) => {
            const ph = el.getAttribute("data-" + lang + "-placeholder");
            if (ph != null) el.placeholder = ph;
          });

          // Sync <html lang>
          document.documentElement.setAttribute("lang", lang);

          // Optional: update the dropdown label immediately
          const btn = document.querySelector('[data-menu="lang"]');
          if (btn)
            btn.innerHTML = (lang === "es" ? "EspaÃ±ol" : "English") + " â–¾";

          // Translate the navbar Home link
          const home = document.getElementById("esk-form-home");
          if (home) {
            home.textContent = lang === "es" ? "â† Inicio" : "â† Home";
          }
        };

        // Apply the saved or default language before navbar JS runs
        const saved = localStorage.getItem(LANG_KEY) || "en";
        window.setLanguage(saved);
      })();
    </script>

    <!-- Navbar logic -->
    <script src="/js/form-navbar.js" defer></script>

  <!-- Client logic (if any) -->
    <script src="/js/form-autosave.js"></script>
  <script src="/js/matching-equity.client.js" defer></script>
</body>
</html>
